{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/alert-icon.svg","../src/js/scroll.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst hitsApi = axios.create({\n  baseURL: 'https://pixabay.com',\n});\n\nexport async function getQuery(value, page) {\n  const params = {\n    key: '44351431-da99bbc5aa576d6c36cc46a59',\n    q: value,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    per_page: 15,\n    page: page,\n  };\n\n  const res = await hitsApi.get('/api', { params });\n  return res.data;\n}\n","export { galleryItems };\n\nfunction galleryItems(arr) {\n  return arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n        <li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\" ></a> \n        <img\n          src=\"${webformatURL}\"\n          alt=\"${tags}\" loading='lazy'width = \"360\" height = \"152\"\n        />\n      <div class=\"info\">\n      <p class=\"info-item\"><b>likes:</b>\"${likes}\"</p>\n      <p class=\"info-item\"><b>Views:</b>\"${views}\"</p>\n      <p class=\"info-item\"><b>Comments:</b>\"${comments}\"</p>\n      <p class=\"info-item\"><b>Downloads:</b>\"${downloads}\"</p>\n      </div>`;\n      }\n    )\n    .join(' ');\n}\n","export default \"__VITE_ASSET__5e15ff8a__\"","export { onScroll, onToTopBtn };\n\nconst toTopBtn = document.querySelector('.btn-to-top');\n\nwindow.addEventListener('scroll', onScroll);\ntoTopBtn.addEventListener('click', onToTopBtn);\n\nfunction onScroll() {\n  const scrolled = window.pageYOffset;\n  const coords = document.documentElement.clientHeight;\n\n  if (scrolled > coords) {\n    toTopBtn.classList.add('visible');\n  }\n  if (scrolled < coords) {\n    toTopBtn.classList.remove('visible');\n  }\n}\n\nfunction onToTopBtn() {\n  if (window.pageYOffset > 0) {\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  }\n}\n","import { getQuery } from './js/pixabay-api';\nimport { galleryItems } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport imageUrl from '../src/img/alert-icon.svg';\nimport SimpleLightbox from 'simplelightbox';\nimport { onScroll, onToTopBtn } from './js/scroll';\n\nconst { form, gallery, loaderBtn, textInfo } = {\n  form: document.querySelector('.form'),\n  gallery: document.querySelector('.gallery'),\n  loaderBtn: document.querySelector('.js-loader-btn'),\n  textInfo: document.querySelector('.js-text-info'),\n};\n\nlet query = '';\nlet page;\nlet perPage;\n// let currentHits = 0;\nlet lightbox = new SimpleLightbox('.gallery-item a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\nonScroll();\nonToTopBtn();\n\nform.addEventListener('submit', onSearchForm);\nloaderBtn.addEventListener('click', onLoadMoreBtn);\n\nfunction onSearchForm(e) {\n  e.preventDefault();\n  window.scrollTo({ top: 0 });\n  query = e.currentTarget.searchQuery.value.trim();\n  page = 1;\n  gallery.innerHTML = '';\n  loaderBtn.classList.add('hidden');\n  if (query === '') {\n    iziToast.warning({\n      message:\n        'The search string cannot be empty. Please specify your search query.',\n      backgroundColor: '#ef4040',\n      messageColor: '#fff',\n      messageSize: '16',\n      imageWidth: 302,\n      close: true,\n      closeOnEscape: true,\n      closeOnClick: true,\n      progressBar: true,\n      progressBarColor: '#b51b1b',\n      transitionIn: 'flipInX',\n      transitionOut: 'flipOutX',\n      position: 'topRight',\n      theme: 'dark',\n      iconUrl: imageUrl,\n      iconColor: '#FAFAFB',\n    });\n    return;\n  }\n\n  textInfo.textContent = 'Loading images, please wait...';\n  textInfo.classList.remove('hidden');\n  getQuery(query, page)\n    .then(data => {\n      perPage = 20;\n      const markup = galleryItems(data.hits);\n      gallery.insertAdjacentHTML('beforeend', markup);\n      lightbox.refresh();\n\n      currentHits = data.hits.length;\n      if (data.totalHits > perPage) {\n        const { height: cardHeight } = document\n          .querySelector('.gallery')\n          .firstElementChild.getBoundingClientRect();\n\n        window.scrollBy({\n          top: cardHeight - 100,\n          behavior: 'smooth',\n        });\n        loaderBtn.classList.remove('hidden');\n      } else {\n        loaderBtn.classList.add('hidden');\n      }\n      if (data.totalHits === 0) {\n        gallery.innerHTML = '';\n        iziToast.error({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          backgroundColor: '#ef4040',\n          messageColor: '#fff',\n          messageSize: '16',\n          imageWidth: 302,\n          close: true,\n          closeOnEscape: true,\n          closeOnClick: true,\n          progressBar: true,\n          progressBarColor: '#b51b1b',\n          transitionIn: 'flipInX',\n          transitionOut: 'flipOutX',\n          position: 'topRight',\n          iconUrl: imageUrl,\n          iconColor: '#FAFAFB',\n          theme: 'dark',\n        });\n\n        loaderBtn.classList.add('hidden');\n        textInfo.classList.add('hidden');\n      }\n    })\n\n    .catch(error => console.log(error))\n    .finally(() => {\n      textInfo.classList.add('hidden');\n      form.reset();\n    });\n}\n\nfunction onLoadMoreBtn() {\n  page += 1;\n  perPage = 20;\n\n  getQuery(query, page)\n    .then(data => {\n      const markup = galleryItems(data.hits);\n      gallery.insertAdjacentHTML('beforeend', markup);\n      lightbox.refresh();\n\n      const totalPages = Math.ceil(data.totalHits / perPage);\n\n      if (page > totalPages) {\n        loaderBtn.classList.add('hidden');\n        textInfo.textContent =\n          \"We're sorry, but you've reached the end of search results.\";\n        textInfo.classList.remove('hidden');\n      }\n    })\n    .catch(error => console.log(error));\n}\n"],"names":["hitsApi","axios","getQuery","value","page","params","galleryItems","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","imageUrl","toTopBtn","onScroll","onToTopBtn","scrolled","coords","form","gallery","loaderBtn","textInfo","query","perPage","lightbox","SimpleLightbox","onSearchForm","onLoadMoreBtn","e","iziToast","data","markup","cardHeight","error","totalPages"],"mappings":"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"}