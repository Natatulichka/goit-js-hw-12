{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/alert-icon.svg","../src/js/scroll.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst hitsApi = axios.create({\n  baseURL: 'https://pixabay.com',\n});\n\nexport async function getQuery(value, page) {\n  const params = {\n    key: '44351431-da99bbc5aa576d6c36cc46a59',\n    q: value,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    per_page: 15,\n    page: page,\n  };\n\n  const res = await hitsApi.get('/api', { params });\n  return res.data;\n}\n","export { galleryItems };\n\nfunction galleryItems(arr) {\n  return arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n        <li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\" >\n        <img\n          src=\"${webformatURL}\"\n          alt=\"${tags}\" loading='lazy'width = \"360\" height = \"152\"\n        /></a> \n      <div class=\"info\">\n      <p class=\"info-item\"><b>likes:</b>\"${likes}\"</p>\n      <p class=\"info-item\"><b>Views:</b>\"${views}\"</p>\n      <p class=\"info-item\"><b>Comments:</b>\"${comments}\"</p>\n      <p class=\"info-item\"><b>Downloads:</b>\"${downloads}\"</p>\n      </div>`;\n      }\n    )\n    .join(' ');\n}\n","export default \"__VITE_ASSET__5e15ff8a__\"","export { onScroll, onToTopBtn };\n\nconst toTopBtn = document.querySelector('.btn-to-top');\n\nwindow.addEventListener('scroll', onScroll);\ntoTopBtn.addEventListener('click', onToTopBtn);\n\nfunction onScroll() {\n  const scrolled = window.pageYOffset;\n  const coords = document.documentElement.clientHeight;\n\n  if (scrolled > coords) {\n    toTopBtn.classList.add('visible');\n  }\n  if (scrolled < coords) {\n    toTopBtn.classList.remove('visible');\n  }\n}\n\nfunction onToTopBtn() {\n  if (window.pageYOffset > 0) {\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  }\n}\n","import { getQuery } from './js/pixabay-api';\nimport { galleryItems } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport imageUrl from '../src/img/alert-icon.svg';\nimport SimpleLightbox from 'simplelightbox';\nimport { onScroll, onToTopBtn } from './js/scroll';\n// ==============================================\nconst { form, gallery, loadMoreBtn, loadElem } = {\n  form: document.querySelector('.form'),\n  gallery: document.querySelector('.gallery'),\n  loadMoreBtn: document.querySelector('.js-load-btn'),\n  loadElem: document.querySelector('.loader'),\n};\n\nlet query = '';\nlet page = 1;\nlet totalPages = 0;\nconst perPage = 15;\nlet lightbox = new SimpleLightbox('.gallery-item a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\nonScroll();\nonToTopBtn();\n// =================================================\nform.addEventListener('submit', onSearchForm);\nloadMoreBtn.addEventListener('click', onLoadMoreBtn);\n\nasync function onSearchForm(e) {\n  e.preventDefault();\n  window.scrollTo({ top: 0 });\n  query = e.currentTarget.elements.searchQuery.value.trim();\n\n  if (!query) {\n    showError(\n      'The search string cannot be empty. Please specify your search query.'\n    );\n    return;\n  }\n  page = 1;\n  showLoader();\n  hideLoadBtn();\n  try {\n    const data = await getQuery(query, page);\n    totalPages = Math.ceil(data.totalHits / perPage);\n\n    if (totalPages === 0) {\n      showError(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n      hideLoader();\n      updateBtnStatus();\n      return;\n    }\n    const markup = galleryItems(data.hits);\n    gallery.innerHTML = markup;\n  } catch (err) {\n    showError(err);\n  }\n  hideLoader();\n  updateBtnStatus();\n  form.reset();\n}\n\nasync function onLoadMoreBtn() {\n  page += 1;\n  hideLoadBtn();\n  showLoader();\n  try {\n    const data = await getQuery(query, page);\n    const markup = galleryItems(data.hits);\n    gallery.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n    skipOldElement();\n  } catch {\n    console.log('error');\n  }\n  hideLoader();\n  updateBtnStatus();\n}\n\n// ===========================\nfunction updateBtnStatus() {\n  if (page >= totalPages) {\n    hideLoadBtn();\n\n    if (totalPages) {\n      showError(\"We're sorry, but you've reached the end of search results.\");\n    }\n  } else {\n    showLoadBtn();\n  }\n}\nfunction showLoadBtn() {\n  loadMoreBtn.classList.remove('hidden');\n}\nfunction hideLoadBtn() {\n  loadMoreBtn.classList.add('hidden');\n}\nfunction showError(message) {\n  iziToast.error({\n    title: 'Error',\n    backgroundColor: '#ef4040',\n    messageColor: '#fff',\n    messageSize: '16',\n    imageWidth: 302,\n    close: true,\n    closeOnEscape: true,\n    closeOnClick: true,\n    progressBar: true,\n    progressBarColor: '#b51b1b',\n    transitionIn: 'flipInX',\n    transitionOut: 'flipOutX',\n    position: 'topRight',\n    iconUrl: imageUrl,\n    iconColor: '#FAFAFB',\n    theme: 'dark',\n    message,\n  });\n}\nfunction showLoader() {\n  loadElem.classList.remove('hidden');\n}\nfunction hideLoader() {\n  loadElem.classList.add('hidden');\n}\nfunction skipOldElement() {\n  const liElem = gallery.children[0];\n  const height = liElem.getBoundingClientRect().height;\n\n  scrollBy({\n    top: height * 3,\n    behavior: 'smooth',\n  });\n}\n"],"names":["hitsApi","axios","getQuery","value","page","params","galleryItems","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","imageUrl","toTopBtn","onScroll","onToTopBtn","scrolled","coords","form","gallery","loadMoreBtn","loadElem","query","totalPages","perPage","lightbox","SimpleLightbox","onSearchForm","onLoadMoreBtn","e","showError","showLoader","hideLoadBtn","data","hideLoader","updateBtnStatus","markup","err","skipOldElement","showLoadBtn","message","iziToast","height"],"mappings":"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"}