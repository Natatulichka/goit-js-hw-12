import{a as C,S,i as m}from"./assets/vendor-a7b3a87b.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function s(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(t){if(t.ep)return;t.ep=!0;const r=s(t);fetch(t.href,r)}})();const B=C.create({baseURL:"https://pixabay.com"});async function h(o,e){const s={key:"44351431-da99bbc5aa576d6c36cc46a59",q:o,image_type:"photo",orientation:"horizontal",safesearch:"true",per_page:15,page:e};return(await B.get("/api",{params:s})).data}function y(o){return o.map(({webformatURL:e,largeImageURL:s,tags:i,likes:t,views:r,comments:l,downloads:O})=>`
        <li class="gallery-item">
      <a class="gallery-link" href="${s}" ></a> 
        <img
          src="${e}"
          alt="${i}" loading='lazy'width = "360" height = "152"
        />
      <div class="info">
      <p class="info-item"><b>likes:</b>"${t}"</p>
      <p class="info-item"><b>Views:</b>"${r}"</p>
      <p class="info-item"><b>Comments:</b>"${l}"</p>
      <p class="info-item"><b>Downloads:</b>"${O}"</p>
      </div>`).join(" ")}const g="/goit-js-hw-12/assets/alert-icon-40fa32d5.svg",p=document.querySelector(".btn-to-top");window.addEventListener("scroll",b);p.addEventListener("click",L);function b(){const o=window.pageYOffset,e=document.documentElement.clientHeight;o>e&&p.classList.add("visible"),o<e&&p.classList.remove("visible")}function L(){window.pageYOffset>0&&window.scrollTo({top:0,behavior:"smooth"})}const{form:w,gallery:d,loaderBtn:n,textInfo:a}={form:document.querySelector(".form"),gallery:document.querySelector(".gallery"),loaderBtn:document.querySelector(".js-loader-btn"),textInfo:document.querySelector(".js-text-info")};let u="",c,f,v=new S(".gallery-item a",{captions:!0,captionsData:"alt",captionDelay:250});b();L();w.addEventListener("submit",T);n.addEventListener("click",q);function T(o){if(o.preventDefault(),window.scrollTo({top:0}),u=o.currentTarget.searchQuery.value.trim(),c=1,d.innerHTML="",n.classList.add("hidden"),u===""){m.warning({message:"The search string cannot be empty. Please specify your search query.",backgroundColor:"#ef4040",messageColor:"#fff",messageSize:"16",imageWidth:302,close:!0,closeOnEscape:!0,closeOnClick:!0,progressBar:!0,progressBarColor:"#b51b1b",transitionIn:"flipInX",transitionOut:"flipOutX",position:"topRight",theme:"dark",iconUrl:g,iconColor:"#FAFAFB"});return}a.textContent="Loading images, please wait...",a.classList.remove("hidden"),h(u,c).then(e=>{f=20;const s=y(e.hits);if(d.insertAdjacentHTML("beforeend",s),v.refresh(),currentHits=e.hits.length,e.totalHits>f){const{height:i}=document.querySelector(".gallery").firstElementChild.getBoundingClientRect();window.scrollBy({top:i-100,behavior:"smooth"}),n.classList.remove("hidden")}else n.classList.add("hidden");e.totalHits===0&&(d.innerHTML="",m.error({message:"Sorry, there are no images matching your search query. Please try again!",backgroundColor:"#ef4040",messageColor:"#fff",messageSize:"16",imageWidth:302,close:!0,closeOnEscape:!0,closeOnClick:!0,progressBar:!0,progressBarColor:"#b51b1b",transitionIn:"flipInX",transitionOut:"flipOutX",position:"topRight",iconUrl:g,iconColor:"#FAFAFB",theme:"dark"}),n.classList.add("hidden"),a.classList.add("hidden"))}).catch(e=>console.log(e)).finally(()=>{a.classList.add("hidden"),w.reset()})}function q(){c+=1,f=20,h(u,c).then(o=>{const e=y(o.hits);d.insertAdjacentHTML("beforeend",e),v.refresh();const s=Math.ceil(o.totalHits/f);c>s&&(n.classList.add("hidden"),a.textContent="We're sorry, but you've reached the end of search results.",a.classList.remove("hidden"))}).catch(o=>console.log(o))}
//# sourceMappingURL=commonHelpers.js.map
